<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>é«˜çŸ¥çœŒ å®šé£Ÿå±‹ãƒãƒƒãƒ—</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",sans-serif;
  background:#f4f4f4;
}

header{
  position:fixed;
  top:0;
  width:100%;
  background:#198754;
  color:white;
  text-align:center;
  padding:14px;
  font-weight:bold;
  z-index:1000;
}

#map{
  position:absolute;
  top:56px;
  bottom:70px;
  width:100%;
}

.bottom-nav{
  position:fixed;
  bottom:0;
  width:100%;
  height:70px;
  background:white;
  display:flex;
  justify-content:space-around;
  align-items:center;
  box-shadow:0 -2px 8px rgba(0,0,0,0.1);
}

.nav-btn{
  color:#198754;
  font-weight:bold;
  font-size:14px;
  text-align:center;
  cursor:pointer;
}

.filter-btn{
  position:fixed;
  right:15px;
  top:70px;
  background:white;
  padding:8px 14px;
  border-radius:20px;
  box-shadow:0 2px 6px rgba(0,0,0,0.2);
  font-size:13px;
  cursor:pointer;
}

.leaflet-popup-content{
  font-size:14px;
}
</style>
</head>

<body>

<header>ğŸ± é«˜çŸ¥çœŒ å®šé£Ÿå±‹ãƒãƒƒãƒ—</header>

<div id="map"></div>
<div class="filter-btn" onclick="cheapOnly()">Â¥1000ä»¥ä¸‹</div>

<div class="bottom-nav">
  <div class="nav-btn" onclick="showAll()">ã™ã¹ã¦</div>
  <div class="nav-btn" onclick="locateUser()">ç¾åœ¨åœ°</div>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
const map = L.map('map').setView([33.5597,133.5311], 12);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
  attribution:'&copy; OpenStreetMap contributors'
}).addTo(map);

const shops = [
  {
    name:"é£Ÿå ‚ã¾ã‚‹ã‚„ï¼ˆé«˜çŸ¥å¸‚ï¼‰",
    lat:33.5597,
    lng:133.5311,
    price:850,
    desc:"æ—¥æ›¿ã‚ã‚Šå®šé£ŸãŒäººæ°—"
  },
  {
    name:"å¸‚å ´é£Ÿå ‚ï¼ˆé«˜çŸ¥å¸‚ï¼‰",
    lat:33.5665,
    lng:133.5450,
    price:1100,
    desc:"ã‚«ãƒ„ã‚ªã®ãŸãŸãå®šé£Ÿ"
  },
  {
    name:"å››ä¸‡åé£Ÿå ‚ï¼ˆå››ä¸‡åå¸‚ï¼‰",
    lat:32.9910,
    lng:132.9330,
    price:950,
    desc:"å·ã‚¨ãƒ“å®šé£ŸãŒåç‰©"
  },
  {
    name:"å®¤æˆ¸æµ·é®®é£Ÿå ‚ï¼ˆå®¤æˆ¸å¸‚ï¼‰",
    lat:33.2872,
    lng:134.1526,
    price:1200,
    desc:"æµ·é®®ãƒŸãƒƒã‚¯ã‚¹å®šé£Ÿ"
  }
];

let markers = [];

function render(filter=null){
  markers.forEach(m=>map.removeLayer(m));
  markers=[];

  shops.forEach(shop=>{
    if(filter && !filter(shop)) return;

    const marker=L.marker([shop.lat,shop.lng])
      .addTo(map)
      .bindPopup(`
        <strong>${shop.name}</strong><br>
        ${shop.desc}<br>
        ğŸ’° ${shop.price}å††
      `);

    markers.push(marker);
  });
}

function cheapOnly(){
  render(shop=>shop.price<=1000);
}

function showAll(){
  render();
}

function locateUser(){
  map.locate({setView:true,maxZoom:15});
}

render();
</script>

</body>
</html>

